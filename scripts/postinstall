#!/bin/bash

# Post-installation script for Claude Usage Tracker
# This script runs after the app is installed to remove the quarantine attribute

# Don't exit on errors - we want to complete installation even if some steps fail
set +e

APP_PATH="/Applications/Claude Usage.app"

echo "Running post-installation tasks..."

# Remove quarantine attribute to prevent Gatekeeper warning
if [ -d "$APP_PATH" ]; then
    echo "Removing quarantine attribute from app..."
    xattr -cr "$APP_PATH" 2>/dev/null
    echo "App is ready to use"

    # Make the app executable
    chmod -R 755 "$APP_PATH" 2>/dev/null
else
    echo "Note: App will be at $APP_PATH"
fi

echo "Installation completed!"

# Always exit successfully so installation doesn't fail
exit 0
